#!/bin/bash

###########################
# Jon Avery's BASH script #
###########################

# Make VIM the default editor
EDITOR="vim"

# Make stop ^X instead of ^S so ^S can be used for forward inc. search
stty stop ^X

# Set the command line editor to VIM
set -o vi

# Make opening a file to edit the same inside and outside vim
alias :e='vim'

PS1="[\u@\h \w] "

# Check to see if I have updates that need to be pulled
DIR="$(dirname "${BASH_SOURCE[0]}")"
cd $DIR
UPSTREAM=${1:-'@{u}'}
LOCAL=$(git rev-parse @)
REMOTE=$(git rev-parse "$UPSTREAM")
BASE=$(git merge-base @ "$UPSTREAM")

if [ $LOCAL = $REMOTE ]; then
	: # Do nothing
elif [ $LOCAL = $BASE ]; then
	echo "Need to pull"
elif [ $REMOTE = $BASE ]; then
	echo "Need to push"
else
	echo "Diverged"
fi
cd - 1> /dev/null
